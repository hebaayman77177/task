<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.11.0/matter.min.js"
        type="application/javascript"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <link href="https://unpkg.com/intro.js/minified/introjs.min.css" rel="stylesheet">
    <link href="https://unpkg.com/intro.js/themes/introjs-modern.css" rel="stylesheet">
    <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <style>
        .frminp {
            border: none;
            margin: 2em;
            /* margin-top:1em; */
            margin-bottom: 1em;
            padding: 0.5em;
            color: black;
            border-radius: 0;
        }

        body {
            background-color: #f5f5f7;
            color: #0f0f13;
            height: 100%;
            direction: rtl;
            transition: all 1s linear;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 25px;


        }

        a {
            text-decoration: none;
            color: #0f0f13;
        }

        form {
            margin-top: 0;
            display: flex;
            justify-content: center;

        }

        footer {
            background-color: #f0f0f0;
            margin-top: 1em;
            text-align: center;
            position: relative;
            bottom: 0;
            padding-top: 1em;
            padding-bottom: 1em;
            width: 100%;
        }

        #renderport {
            margin: auto;
            border-radius: 5px;
            background-color: #0f0f13;
            padding: 0px;
            width: 1400px;
            padding: 10px;

        }

        .cusbutton {
            padding: 11px;
        }

        .introjs-prevbutton {
            float: right;
        }

        .introjs-nextbutton {
            float: left;
        }

        .introjs-tooltip {
            font-size: 20px;
        }
    </style>

</head>

<body>
    <div class="container-fluid text-center">
        <h1 id="header" style="font-family: 'Sacramento', cursive; font-size:50px"> Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ù‚Ø°ÙˆÙØ§Øª</h1>
        <form class="row row-cols-lg-auto g-3 align-items-center form">
            <div class="col-12">
                <label class="visually-hidden" fid="angl">Ø§Ù„Ø²Ø§ÙˆÙŠÙ‡</label>
                <div class="input-group">
                    <div class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z" />
                            <path
                                d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z" />
                        </svg></div>
                    <input type="number" class="input-lg form-control" id="angl" placeholder="Ø§Ù„Ø²Ø§ÙˆÙŠÙ‡">
                </div>
            </div>

            <div class="col-12">
                <label class="visually-hidden" fid="angl">Ø§Ù„Ø³Ø±Ø¹Ù‡</label>
                <div class="input-group">
                    <div class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            fill="currentColor" class="bi bi-speedometer2" viewBox="0 0 16 16">
                            <path
                                d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z" />
                            <path fill-rule="evenodd"
                                d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z" />
                        </svg></div>
                    <input type="number" class="input-lg form-control" id="vel" placeholder="Ø§Ù„Ø³Ø±Ø¹Ù‡">
                </div>
            </div>

            <div class="col-12">
                <button id='start' type="button" class="input-lg btn btn-primary cusbutton">Ø§Ø¨ØªØ¯ÙŠ</button>
            </div>
            <div class="col-12">
                <button id='reset' type="button" class="input-lg btn btn-primary cusbutton">Ø¹ÙŠØ¯</button>
            </div>
            <!-- <input type="number" placeholder="Ø§Ù„Ø²Ø§ÙˆÙŠÙ‡" class="frminp" id="angl"> -->
            <!-- <input type="number" placeholder="Ø§Ù„Ø³Ø±Ø¹Ù‡" class="frminp" id="vel"> -->
            <!-- <button type="button" class="btn btn-default" id='start'>Ø§Ø¨Ø¯Ø§</button>
            <button type="button" class="btn btn-default" id='reset'>Ø§Ø¹Ø§Ø¯Ù‡</button> -->
        </form>
        <div id="renderport"></div>

    </div>




    <!-- <footer class="footer" id="ftr">
        Made by <a href="https://github.com/beetrandahiya">Prakrisht Dahiya</a> using <a href=""><img
                src="https://miro.medium.com/max/1000/1*7eTJiUndx4MiCrLuJkQqdA.png" width="80px"></a>
    </footer> -->
    <script>


        document.addEventListener("DOMContentLoaded", function () {

            const domElements = {
                'renderPort': 'renderport',
                'footer': 'ftr',
                'angle': 'angl',
                'velocity': 'vel',
                'startButton': 'start',
                'resetButton': 'reset',
                'header': 'header'
            }

            let renderPort = document.getElementById(domElements['renderPort']),
                footer = document.getElementById(domElements['footer']),
                angleInput = document.getElementById(domElements['angle']),
                velocityInput = document.getElementById(domElements['velocity']),
                startButton = document.getElementById(domElements['startButton']),
                resetButton = document.getElementById(domElements['resetButton']),
                header = document.getElementById(domElements['header']),
                ball,
                ballStartPosition = { x: 90, y: 390 },
                renderWidt = 1350,
                renderHeight = 700;
            // module aliases
            const Engine = Matter.Engine,
                Events = Matter.Events,
                Render = Matter.Render,
                Runner = Matter.Runner,
                Body = Matter.Body,
                Composite = Matter.Composite,
                Composites = Matter.Composites,
                Constraint = Matter.Constraint,
                MouseConstraint = Matter.MouseConstraint,
                Mouse = Matter.Mouse,
                World = Matter.World,
                Bodies = Matter.Bodies,
                Vector = Matter.Vector;

            function intro() {

                let firstTime = localStorage.getItem('projictile7771777_first_time');
                if (firstTime !== null) return

                introJs().setOptions({
                    prevLabel: "Ø§Ø±Ø¬Ø¹",
                    nextLabel: "ÙƒÙ…Ù„",
                    doneLabel: "ØªÙ…Ø§Ù…",
                    steps: [{
                        // element: header,
                        intro: "Ø§Ù‡Ù„Ø§ Ø¨ÙŠÙƒ ÙÙŠ ØªØ¬Ø±Ø¨Ù‡ Ø­Ø±ÙƒÙ‡ Ø§Ù„Ù…Ù‚Ø°ÙˆÙØ§Øª 	&#127881;	&#127881;	&#127881;"
                    }, {
                        element: angleInput,
                        intro: "Ø¯Ø®Ù„ Ø§Ù„Ø²Ø§ÙˆÙŠÙ‡"
                    }
                        , {
                        element: velocityInput,
                        intro: "Ø¯Ø®Ù„ Ø§Ù„Ø³Ø±Ø¹Ù‡"
                    }, {
                        element: startButton,
                        intro: "Ø§Ø¨ØªØ¯ÙŠ"
                    }, {
                        element: startButton,
                        intro: "Ø¯ÙˆØ³ Ø§Ø¹Ø§Ø¯Ù‡ Ø¹Ø´Ø§Ù† ØªÙƒÙ…Ù„ ØªØ§Ù†ÙŠ"
                    }
                    ]
                }).start();

                localStorage.setItem('projictile7771777_first_time', true)
            }

            intro()

            const state = {
                toStart: true,
                init: function () {
                    resetButton.style.display = "none";
                },
                toggleStartRest: function () {

                    if (this.toStart) {
                        startButton.style.display = "none";
                        resetButton.style.display = "inline";
                    } else {
                        resetButton.style.display = "none";
                        startButton.style.display = "inline";
                    }
                    this.toStart = !this.toStart
                }
            }

            state.init();
            // create an engine
            var engine = Engine.create();
            // create a renderer
            var render = Render.create({
                element: document.getElementById('renderport'),
                engine: engine,
                options: {
                    width: renderWidt,
                    height: renderHeight,
                    //showVelocity: true,
                    //showCollisions: true,

                    background: '#FFFFFF'
                }
            });

            var ground = Bodies.rectangle(400, renderHeight - 5, 5000, 60, {
                isStatic: true,
                render: {
                    fillStyle: '#fed73e',
                    lineWidth: 5,
                    strokeStyle: '#000',
                }
            });
            ball = Bodies.circle(90, 390, 30, {
                // friction: 0, frictionAir: 0, restitution: 1,
                render: {
                    fillStyle: '#dd4444',
                    strokeStyle: '#222222',
                    lineWidth: 3,
                }
            });


            engine.world.gravity.y = 1;

            World.add(engine.world, [ground, ball]);
            // run the engine
            Engine.run(engine);
            // run the renderer
            Render.run(render);


            function run() {
                if (velocityInput.value === "" || angleInput.value === "") return
                console.log("ğŸš€ ~ file: index.html ~ line 232 ~ run ~ velocityInput", velocityInput.value)
                velocityInput.disabled = true;
                angleInput.disabled = true;
                //calculating horizontal and vertical velocity
                var angle = $("#angl").val();
                angle = angle * (Math.PI) / 180;
                var v = $("#vel").val();
                vx = v * (Math.cos(angle));
                vy = -v * (Math.sin(angle));
                Matter.Body.setVelocity(ball, { x: vx, y: vy });
                // add all of the bodies to the world
                // World.add(engine.world, [ball]);
                state.toggleStartRest()


            }

            function reset() {
                velocityInput.disabled = false;
                angleInput.disabled = false;
                // Matter.World.remove(engine.world, [ball])
                Matter.Body.setVelocity(ball, { x: 0, y: 0 });
                Matter.Body.setPosition(ball, ballStartPosition);

                state.toggleStartRest()
                angleInput.value = ""
                velocityInput.value = ""

            }

            startButton.addEventListener("click", run);
            resetButton.addEventListener("click", reset);

        })
    </script>

</body>

</html>